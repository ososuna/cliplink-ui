import{j as r}from"./utils.ag4OtbVb.js";import{r as a}from"./index.CWXBSLiN.js";import{z as m,u as d,F as p,a as f,b as h,c as x,d as S,t as g}from"./form.JoO0pxNJ.js";import{A as w,a as j}from"./auth.view-service.impl.BxHa1p8t.js";import"./ui.store.V0UIaDrX.js";import{B as F}from"./button.DlpEXsww.js";import{I as v}from"./input.BC8Asylz.js";import{u as b}from"./use-toast.D-BVXOBP.js";import{u as I}from"./use-service.OG-UkMvg.js";import"./index.Cxtmh_mJ.js";import"./index.bO9abPB-.js";import"./index.CrMHok4L.js";const P=m.object({email:m.string().email({message:"Please enter a valid email address."})}),U=({buttonText:i})=>{const{toast:o}=b(),n=I(j,w),[l,s]=a.useState(!1);a.useEffect(()=>{const e=new URL(window.location.href);e.searchParams.has("error")&&(o({title:"Something went wrong",description:e.searchParams.get("error"),variant:"destructive"}),e.searchParams.delete("error"),window.history.replaceState({},document.title,e.toString()))},[o]);const t=d({resolver:g(P),defaultValues:{email:""}}),c=async e=>{const{email:u}=e;s(!0),await n.forgotPassword(u),s(!1)};return r.jsx(p,{...t,children:r.jsxs("form",{onSubmit:t.handleSubmit(c),children:[r.jsx(f,{control:t.control,name:"email",render:({field:e})=>r.jsxs(h,{children:[r.jsx(x,{children:r.jsx(v,{type:"email",autoComplete:"off",placeholder:"name@example.com",...e})}),r.jsx(S,{})]})}),r.jsx(F,{className:"w-full mt-2",type:"submit",children:l?"Sending email...":i})]})})};export{U as default};
