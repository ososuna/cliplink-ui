import{j as s}from"./utils.ag4OtbVb.js";import{r as d}from"./index.CWXBSLiN.js";import{z as o,u as g,F,a as t,b as m,e as n,c as i,d as c,t as S}from"./form.CVx5lfpo.js";import{A as y,a as L}from"./auth.view-service.impl.BxHa1p8t.js";import"./ui.store.V0UIaDrX.js";import{B as N}from"./button.D_Iz6kOH.js";import{I as l}from"./input.BC8Asylz.js";import{u as P}from"./use-service.OG-UkMvg.js";import{L as b}from"./loader-circle.CvAbasbM.js";import"./index.DttyIPLX.js";import"./index.l-XZqF8a.js";import"./index.CrMHok4L.js";import"./createLucideIcon.CQccyi0-.js";const C=o.object({name:o.string().min(2).max(60),lastName:o.string().min(2).max(120),password:o.string().min(8).max(128),confirmPassword:o.string().min(8).max(128)}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),D=()=>{const[a,p]=d.useState(!1),x=d.useRef(""),f=P(L,y);d.useEffect(()=>{const r=new URLSearchParams(window.location.search);x.current=r.get("email")},[]);const e=g({resolver:S(C),defaultValues:{name:"",lastName:"",password:"",confirmPassword:""}}),j=async r=>{const{name:u,lastName:h,password:w}=r;p(!0),await f?.registerByEmail(x.current,u,h,w),p(!1)};return s.jsx(F,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(j),className:"space-y-2",children:[s.jsx(t,{control:e.control,name:"name",render:({field:r})=>s.jsxs(m,{children:[s.jsx(n,{children:"Name"}),s.jsx(i,{children:s.jsx(l,{type:"text",autoComplete:"off",...r})}),s.jsx(c,{})]})}),s.jsx(t,{control:e.control,name:"lastName",render:({field:r})=>s.jsxs(m,{children:[s.jsx(n,{children:"Last name"}),s.jsx(i,{children:s.jsx(l,{type:"text",autoComplete:"off",...r})}),s.jsx(c,{})]})}),s.jsx(t,{control:e.control,name:"password",render:({field:r})=>s.jsxs(m,{children:[s.jsx(n,{children:"Password"}),s.jsx(i,{children:s.jsx(l,{type:"password",autoComplete:"off",...r})}),s.jsx(c,{})]})}),s.jsx(t,{control:e.control,name:"confirmPassword",render:({field:r})=>s.jsxs(m,{children:[s.jsx(n,{children:"Confirm your password"}),s.jsx(i,{children:s.jsx(l,{type:"password",autoComplete:"off",...r})}),s.jsx(c,{})]})}),s.jsx(N,{className:"w-full",type:"submit",children:a?s.jsxs(s.Fragment,{children:[s.jsx(b,{className:"animate-spin"})," Loading..."]}):"Register"})]})})};export{D as default};
