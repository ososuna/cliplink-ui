import{j as s}from"./utils.ag4OtbVb.js";import{r as j}from"./index.CWXBSLiN.js";import{z as e,u as F,F as P,a as n,b as i,e as d,c,d as p,t as S}from"./form.JoO0pxNJ.js";import{A as g,a as b}from"./auth.view-service.impl.BxHa1p8t.js";import"./ui.store.V0UIaDrX.js";import{B as L}from"./button.DlpEXsww.js";import{I as l}from"./input.BC8Asylz.js";import{u as y}from"./use-service.OG-UkMvg.js";import{L as I}from"./loader-circle.CvAbasbM.js";import"./index.Cxtmh_mJ.js";import"./index.bO9abPB-.js";import"./index.CrMHok4L.js";import"./createLucideIcon.CQccyi0-.js";const C=e.object({password:e.string().min(8).max(128),confirmPassword:e.string().min(8).max(128)}).refine(r=>r.password===r.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),D=({token:r})=>{const[f,t]=j.useState(!1),w=y(b,g),a=F({resolver:S(C),defaultValues:{password:"",confirmPassword:""}}),u=async o=>{const{password:x}=o;t(!0);const h=await w.updatePassword(r,x);if(t(!1),h){const m=new URL(`${window.location.protocol}//${window.location.host}/dashboard`);m.searchParams.set("updated-password","true"),window.location.href=m.toString()}};return s.jsx(P,{...a,children:s.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-2",children:[s.jsx(n,{control:a.control,name:"password",render:({field:o})=>s.jsxs(i,{children:[s.jsx(d,{children:"Password"}),s.jsx(c,{children:s.jsx(l,{type:"password",autoComplete:"off",...o})}),s.jsx(p,{})]})}),s.jsx(n,{control:a.control,name:"confirmPassword",render:({field:o})=>s.jsxs(i,{children:[s.jsx(d,{children:"Confirm your password"}),s.jsx(c,{children:s.jsx(l,{type:"password",autoComplete:"off",...o})}),s.jsx(p,{})]})}),s.jsx(L,{className:"w-full",type:"submit",children:f?s.jsxs(s.Fragment,{children:[s.jsx(I,{className:"animate-spin"})," Loading..."]}):"Reset password"})]})})};export{D as default};
